<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gizli Dosyalar ArÅŸivi</title>
  <style>
    /* 1. BÃ–LÃœM: TÃœM CSS (ORÄ°JÄ°NAL DOSYANDAKÄ° STÄ°LLER) [cite: 1-50] */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #0d0d0d; color: #e0e0e0; line-height: 1.6; }
    .header { background: rgba(0, 0, 0, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); position: sticky; top: 0; z-index: 1000; }
    .header-container { max-width: 1600px; margin: 0 auto; padding: 0 40px; }
    .header-top { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.05); }
    .site-logo { display: flex; align-items: center; gap: 15px; }
    .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #1a1a1a, #2a2a2a); border: 1px solid rgba(255, 255, 255, 0.1); display: flex; align-items: center; justify-content: center; font-weight: bold; color: #fff; border-radius: 4px; }
    .site-title { font-size: 1.5rem; font-weight: 600; color: #fff; letter-spacing: -0.5px; }
    .header-actions { display: flex; gap: 15px; }
    .header-nav { display: flex; gap: 20px; padding: 15px 0; overflow-x: auto; flex-wrap: wrap; }
    .filter-group { display: flex; gap: 10px; align-items: center; }
    .filter-label { color: #888; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 500; white-space: nowrap; }
    select { padding: 8px 35px 8px 15px; background: #1a1a1a; color: #e0e0e0; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; font-size: 0.95rem; cursor: pointer; transition: all 0.3s; appearance: none; background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23888' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; min-width: 150px; }
    .main-container { max-width: 1600px; margin: 0 auto; padding: 40px; }
    .content-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(500px, 1fr)); gap: 30px; }
    
    /* MODAL VE GÃ–RSEL ALANI TASARIMI [cite: 51-67] */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.98); z-index: 10000; overflow-y: auto; align-items: flex-start; justify-content: center; backdrop-filter: blur(15px); }
    .modal-icerik { background: #0a0a0a; width: 95%; max-width: 1100px; margin: 30px auto; border-radius: 12px; border: 1px solid #333; position: relative; overflow: hidden; }
    .kapat-buton { position: absolute; right: 25px; top: 15px; font-size: 40px; color: #fff; cursor: pointer; z-index: 101; background: rgba(255,255,255,0.1); border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; }
    .modal-gorsel-container { background: #000; min-height: 400px; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #222; position: relative; }
    .badge { padding: 5px 12px; border-radius: 4px; font-size: 0.8rem; font-weight: 500; border: 1px solid; text-transform: uppercase; }
  </style>
</head>
<body>

  <header class="header">
    <div class="header-container">
      <div class="header-top">
        <div class="site-logo"><div class="logo-icon">GD</div><div class="site-title">Gizli Dosyalar ArÅŸivi</div></div>
        <div class="header-actions">
            <button id="randomBtn" class="primary">Rastgele Dosya</button>
        </div>
      </div>
      
      <nav class="header-nav">
        <div class="filter-group">
          <span class="filter-label">BÃ¶lge</span>
          <select id="ulkeFilter">
            <option value="">TÃ¼m BÃ¶lgeler</option>
            <optgroup label="Avrupa"><option value="Almanya">Almanya</option><option value="Fransa">Fransa</option><option value="Ä°ngiltere">Ä°ngiltere</option><option value="Ä°rlanda">Ä°rlanda</option><option value="Ä°talya">Ä°talya</option><option value="Ä°spanya">Ä°spanya</option></optgroup>
            <optgroup label="Asya"><option value="TÃ¼rkiye">TÃ¼rkiye</option><option value="Bulgaristan">Bulgaristan</option><option value="Yunanistan">Yunanistan</option></optgroup>
            <optgroup label="Amerika"><option value="ABD">BirleÅŸik Devletler</option></optgroup>
            <optgroup label="Afrika"><option value="Afrika">Afrika KÄ±tasÄ±</option></optgroup>
            <optgroup label="Orta DoÄŸu"><option value="Suudi Arabistan">Suudi Arabistan</option><option value="Ä°srail">Ä°srail</option><option value="Filistin">Filistin</option></optgroup>
            <optgroup label="Sovyet"><option value="SSCB">SSCB</option></optgroup>
          </select>
        </div>

        <div class="filter-group">
          <span class="filter-label">Platform/Grup</span>
          <select id="platformFilter">
            <option value="">TÃ¼m Platformlar</option>
            <optgroup label="Sosyal Medya"><option value="Discord">Discord</option><option value="Twitter/X">Twitter/X</option><option value="Facebook">Facebook</option><option value="Reddit">Reddit</option><option value="4chan">4chan</option><option value="8chan">8chan</option><option value="Telegram">Telegram</option><option value="WhatsApp">WhatsApp</option><option value="Instagram">Instagram</option><option value="TikTok">TikTok</option><option value="Snapchat">Snapchat</option></optgroup>
            <optgroup label="Hack GruplarÄ±"><option value="Anonymous">Anonymous</option><option value="LulzSec">LulzSec</option><option value="Lizard Squad">Lizard Squad</option><option value="RedHack">RedHack</option><option value="AyyÄ±ldÄ±z Tim">AyyÄ±ldÄ±z Tim</option><option value="Lazarus Group">Lazarus Group</option></optgroup>
            <optgroup label="Resmi Kaynaklar"><option value="Resmi Belge">Resmi Belge</option><option value="WikiLeaks">WikiLeaks</option><option value="Devlet ArÅŸivi">Devlet ArÅŸivi</option></optgroup>
          </select>
        </div>

        <div class="filter-group">
          <span class="filter-label">TÃ¼r</span>
          <select id="turFilter">
            <option value="">TÃ¼m TÃ¼rler</option>
            <option value="SavaÅŸ">SavaÅŸ</option><option value="Cinayet">Cinayet</option><option value="Esrarengiz Ã–lÃ¼m">Esrarengiz Ã–lÃ¼m</option><option value="Suikast">Suikast</option><option value="TerÃ¶r">TerÃ¶r</option><option value="Ä°stihbarat">Ä°stihbarat</option><option value="SÄ±zÄ±ntÄ±">SÄ±zÄ±ntÄ±</option><option value="MK-Ultra">MK-Ultra</option><option value="UFO/UzaylÄ±">UFO/UzaylÄ±</option><option value="Deep Web">Deep Web</option><option value="Dark Web">Dark Web</option><option value="Veri SÄ±zÄ±ntÄ±sÄ±">Veri SÄ±zÄ±ntÄ±sÄ±</option><option value="Casusluk">Casusluk</option><option value="Ajan">Ajan</option>
          </select>
        </div>

        <div class="filter-group">
          <span class="filter-label">YÄ±l</span>
          <select id="yilFilter">
            <option value="">TÃ¼m YÄ±llar</option>
            <option value="2024">2024</option><option value="2023">2023</option><option value="2022">2022</option><option value="2010-2014">2010-2014</option><option value="2000-2009">2000-2009</option><option value="1900-1919">1900-1919</option>
          </select>
        </div>
      </nav>
    </div>
  </header>

  <main class="main-container">
    <div id="content" class="content-grid"></div>
  </main>

  <div id="modal-ekran" class="modal">
    <div class="modal-icerik">
        <span class="kapat-buton" onclick="modalKapat()">&times;</span>
        <div id="modal-detay"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script>
    (function() {
      'use strict';
      
      // GÃœVENLÄ°K Ã–NLEMLERÄ° (ORÄ°JÄ°NAL DOSYADAN)
      document.addEventListener('contextmenu', e => e.preventDefault());
      document.addEventListener('selectstart', e => e.preventDefault());

      const { createClient } = supabase;
      const supabaseClient = createClient(SUPABASE_CONFIG.url, SUPABASE_CONFIG.key);

      const content = document.getElementById('content');

      /* YENÄ° MODAL FONKSÄ°YONU: SÄ°YAH ALAN VE DATABASE LÄ°NKLERÄ° [cite: 59-67] */
      window.modalAc = function(dosya) {
        const modal = document.getElementById('modal-ekran');
        const detay = document.getElementById('modal-detay');
        
        detay.innerHTML = `
          <div class="modal-gorsel-container">
             <img src="${dosya.belge_url}" style="max-width:100%; max-height:600px; object-fit:contain;">
             ${(dosya.yalan_mi === true || dosya.yalan_mi === 'true') ? '<div style="position:absolute; color:red; border:10px solid red; padding:20px; font-weight:900; transform:rotate(-20deg); font-size:4rem; opacity:0.7; pointer-events:none;">KESÄ°N YALAN</div>' : ''}
          </div>
          <div style="padding:45px;">
            <div style="margin-bottom:25px; display:flex; gap:10px; flex-wrap:wrap;">
              <span class="badge" style="border-color:#444;">${dosya.ulke}</span>
              <span class="badge" style="border-color:#444;">${dosya.yil || ''}</span>
              <span class="badge" style="border-color:#ff4500; color:#ff4500;">${dosya.tur}</span>
              <span class="badge" style="border-color:#a78bfa; color:#a78bfa;">${dosya.platform}</span>
            </div>
            <h1 style="color:#fff; font-size:2.8rem; margin-bottom:20px; font-weight:700;">${dosya.baslik}</h1>
            <p style="color:#ccc; font-size:1.25rem; line-height:1.9; margin-bottom:40px; white-space:pre-wrap;">${dosya.detay}</p>
            
            <div style="display:flex; gap:25px; border-top:1px solid #222; padding-top:30px; align-items:center; flex-wrap:wrap;">
              ${dosya.belge_url ? `<a href="${dosya.belge_url}" target="_blank" style="background:#fff; color:#000; padding:15px 35px; border-radius:8px; text-decoration:none; font-weight:bold;">ðŸ“„ TAM BELGEYÄ° AÃ‡</a>` : ''}
              ${dosya.kaynak_link ? `<a href="${dosya.kaynak_link}" target="_blank" style="color:#60a5fa; text-decoration:none; font-weight:500;">ðŸ”— KaynaÄŸa Git â†’</a>` : ''}
            </div>
          </div>
        `;
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };

      window.modalKapat = function() {
        document.getElementById('modal-ekran').style.display = 'none';
        document.body.style.overflow = 'auto';
      };

      async function verileriGetir() {
        let query = supabaseClient.from('gizli_dosyalar').select('*').order('id', { ascending: false });
        
        const u = document.getElementById('ulkeFilter').value;
        const p = document.getElementById('platformFilter').value;
        const t = document.getElementById('turFilter').value;
        const y = document.getElementById('yilFilter').value;

        if (u) query = query.eq('ulke', u);
        if (p) query = query.eq('platform', p);
        if (t) query = query.eq('tur', t);
        if (y) query = query.eq('yil', y);

        const { data } = await query;
        if (data) {
          content.innerHTML = '';
          data.forEach(dosya => {
            const card = document.createElement('div');
            card.className = 'dosya-card';
            card.onclick = () => modalAc(dosya);
            card.innerHTML = `
              <img src="${dosya.belge_url}" style="width:100%; height:300px; object-fit:cover; border-bottom: 1px solid rgba(255,255,255,0.1);">
              <div style="padding:25px;">
                <div style="display:flex; gap:8px; margin-bottom:10px;">
                   <span class="badge" style="font-size:0.7rem; border-color:#333;">${dosya.ulke}</span>
                   <span class="badge" style="font-size:0.7rem; border-color:#333;">${dosya.yil}</span>
                </div>
                <h2 style="color:#fff; font-size:1.4rem; margin-bottom:10px;">${dosya.baslik}</h2>
                <p style="color:#888; font-size:0.95rem;">${dosya.ozet.substring(0,120)}...</p>
              </div>
            `;
            content.appendChild(card);
          });
        }
      }

      // Otomatik Listeleme: Sayfa yÃ¼klenince verileri getir [cite: 82]
      verileriGetir();

      // Filtreler deÄŸiÅŸince otomatik gÃ¼ncelleme
      [ulkeFilter, platformFilter, turFilter, yilFilter].forEach(f => f.addEventListener('change', verileriGetir));
      document.getElementById('randomBtn').addEventListener('click', verileriGetir);
    })();
  </script>
</body>
</html>
