<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Paneli - Gizli Dosyalar</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #0a0a0a;
      color: #e0e0e0;
      line-height: 1.6;
    }
    
    .header {
      background: rgba(0, 0, 0, 0.95);
      border-bottom: 2px solid #dc2626;
      padding: 20px 0;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .header-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logo-icon {
      width: 45px;
      height: 45px;
      background: linear-gradient(135deg, #dc2626, #991b1b);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #fff;
      border-radius: 6px;
      font-size: 1.2rem;
    }
    
    .logo-text {
      font-size: 1.4rem;
      font-weight: 700;
      color: #dc2626;
      letter-spacing: -0.5px;
    }
    
    .logout-btn {
      padding: 10px 25px;
      background: rgba(220, 38, 38, 0.1);
      color: #dc2626;
      border: 1px solid #dc2626;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .logout-btn:hover {
      background: #dc2626;
      color: #fff;
    }
    
    .container {
      max-width: 1400px;
      margin: 40px auto;
      padding: 0 30px;
    }
    
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 10px;
    }
    
    .tab {
      padding: 12px 30px;
      background: #1a1a1a;
      color: #888;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px 6px 0 0;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .tab.active {
      background: #dc2626;
      color: #fff;
      border-color: #dc2626;
    }
    
    .tab:hover:not(.active) {
      background: #252525;
      border-color: rgba(255, 255, 255, 0.2);
    }
    
    .tab-content {
      display: none;
      background: rgba(20, 20, 20, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 40px;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .form-section {
      margin-bottom: 40px;
    }
    
    .section-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid #dc2626;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .section-title::before {
      content: '▸';
      color: #dc2626;
      font-size: 1.5rem;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 25px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .form-group.full-width {
      grid-column: 1 / -1;
    }
    
    label {
      color: #aaa;
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    label .required {
      color: #dc2626;
      margin-left: 4px;
    }
    
    input, select, textarea {
      padding: 12px 15px;
      background: #0a0a0a;
      color: #e0e0e0;
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 6px;
      font-size: 0.95rem;
      font-family: inherit;
      transition: all 0.3s;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #dc2626;
      background: #111;
    }
    
    textarea {
      min-height: 120px;
      resize: vertical;
      line-height: 1.6;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 15px;
      background: rgba(220, 38, 38, 0.05);
      border: 1px solid rgba(220, 38, 38, 0.2);
      border-radius: 6px;
    }
    
    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: #dc2626;
    }
    
    .checkbox-label {
      color: #dc2626;
      font-weight: 600;
      text-transform: none;
      letter-spacing: 0;
      cursor: pointer;
    }
    
    .button-group {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      padding-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    button {
      padding: 14px 35px;
      background: #dc2626;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 700;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    button:hover {
      background: #b91c1c;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button.secondary {
      background: #1a1a1a;
      color: #888;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    button.secondary:hover {
      background: #252525;
      color: #fff;
      box-shadow: none;
    }
    
    .sql-editor {
      background: #000;
      border: 1px solid rgba(220, 38, 38, 0.3);
      border-radius: 6px;
      padding: 20px;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      color: #0f0;
      line-height: 1.6;
      overflow-x: auto;
      min-height: 150px;
    }
    
    .response-box {
      margin-top: 20px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      display: none;
    }
    
    .response-box.success {
      border-color: rgba(34, 197, 94, 0.3);
      background: rgba(34, 197, 94, 0.05);
      color: #4ade80;
      display: block;
    }
    
    .response-box.error {
      border-color: rgba(220, 38, 38, 0.3);
      background: rgba(220, 38, 38, 0.05);
      color: #ef4444;
      display: block;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 25px;
      text-align: center;
    }
    
    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: #dc2626;
      margin-bottom: 10px;
    }
    
    .stat-label {
      color: #888;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .helper-text {
      color: #666;
      font-size: 0.85rem;
      margin-top: 5px;
      font-style: italic;
    }
    
    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .container {
        padding: 0 15px;
      }
      
      .tab-content {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-container">
      <div class="logo">
        <div class="logo-icon">⚠</div>
        <div class="logo-text">ADMİN PANELİ</div>
      </div>
      <button class="logout-btn" onclick="alert('Çıkış yapıldı!')">Çıkış Yap</button>
    </div>
  </header>

  <div class="container">
    <div class="tabs">
      <div class="tab active" onclick="switchTab('add')">Yeni Dosya Ekle</div>
      <div class="tab" onclick="switchTab('sql')">SQL Sorguları</div>
      <div class="tab" onclick="switchTab('stats')">İstatistikler</div>
    </div>

    <!-- YENİ DOSYA EKLE -->
    <div id="addTab" class="tab-content active">
      <form id="addForm">
        <div class="form-section">
          <h2 class="section-title">Temel Bilgiler</h2>
          <div class="form-grid">
            <div class="form-group full-width">
              <label>Başlık <span class="required">*</span></label>
              <input type="text" id="baslik" required placeholder="Örn: Çernobil Radyasyon Skandalı">
            </div>
            
            <div class="form-group full-width">
              <label>Özet <span class="required">*</span></label>
              <textarea id="ozet" required placeholder="Kısa özet (2-3 cümle)"></textarea>
            </div>
            
            <div class="form-group full-width">
              <label>Detaylı Açıklama <span class="required">*</span></label>
              <textarea id="detay" required style="min-height: 200px;" placeholder="Detaylı açıklama, tarihsel bilgiler, belgeler vs."></textarea>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h2 class="section-title">Kategorizasyon</h2>
          <div class="form-grid">
            <div class="form-group">
              <label>Ülke/Bölge <span class="required">*</span></label>
              <select id="ulke" required>
                <option value="">Seçiniz</option>
                <option value="Almanya">Almanya</option>
                <option value="Fransa">Fransa</option>
                <option value="İngiltere">İngiltere</option>
                <option value="İrlanda">İrlanda</option>
                <option value="İtalya">İtalya</option>
                <option value="İspanya">İspanya</option>
                <option value="Türkiye">Türkiye</option>
                <option value="Bulgaristan">Bulgaristan</option>
                <option value="Yunanistan">Yunanistan</option>
                <option value="ABD">Birleşik Devletler</option>
                <option value="Afrika">Afrika Kıtası</option>
                <option value="Suudi Arabistan">Suudi Arabistan</option>
                <option value="İsrail">İsrail</option>
                <option value="Filistin">Filistin</option>
                <option value="SSCB">SSCB</option>
              </select>
            </div>

            <div class="form-group">
              <label>Platform/Grup</label>
              <select id="platform">
                <option value="">Seçiniz (Opsiyonel)</option>
                <optgroup label="Sosyal Medya">
                  <option value="Discord">Discord</option>
                  <option value="Twitter/X">Twitter/X</option>
                  <option value="Facebook">Facebook</option>
                  <option value="Reddit">Reddit</option>
                  <option value="4chan">4chan</option>
                  <option value="Telegram">Telegram</option>
                </optgroup>
                <optgroup label="Hack Grupları">
                  <option value="Anonymous">Anonymous</option>
                  <option value="LulzSec">LulzSec</option>
                  <option value="Lazarus Group">Lazarus Group</option>
                  <option value="RedHack">RedHack</option>
                </optgroup>
                <optgroup label="Resmi">
                  <option value="Resmi Belge">Resmi Belge</option>
                  <option value="WikiLeaks">WikiLeaks</option>
                  <option value="Basın">Basın</option>
                </optgroup>
              </select>
            </div>

            <div class="form-group">
              <label>Olay Türü <span class="required">*</span></label>
              <select id="tur" required>
                <option value="">Seçiniz</option>
                <option value="Savaş">Savaş</option>
                <option value="Cinayet">Cinayet</option>
                <option value="Suikast">Suikast</option>
                <option value="Terör">Terör</option>
                <option value="İstihbarat">İstihbarat</option>
                <option value="Hack/Siber Saldırı">Hack/Siber Saldırı</option>
                <option value="Casusluk">Casusluk</option>
                <option value="Savaş Suçu">Savaş Suçu</option>
                <option value="Soykırım">Soykırım</option>
                <option value="Nükleer">Nükleer</option>
                <option value="Radyasyon">Radyasyon</option>
                <option value="MK-Ultra">MK-Ultra</option>
                <option value="İnsan Deneyi">İnsan Deneyi</option>
              </select>
            </div>

            <div class="form-group">
              <label>Ortam</label>
              <select id="ortam">
                <option value="">Seçiniz (Opsiyonel)</option>
                <option value="Sanal Dünya">Sanal Dünya</option>
                <option value="Gerçek Dünya">Gerçek Dünya</option>
                <option value="Her İkisi">Her İkisi</option>
              </select>
            </div>

            <div class="form-group">
              <label>Tarih <span class="required">*</span></label>
              <input type="date" id="tarih" required>
            </div>

            <div class="form-group">
              <label>Yıl</label>
              <select id="yil">
                <option value="">Otomatik (Tarihten)</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2010-2014">2010-2014</option>
                <option value="2000-2009">2000-2009</option>
                <option value="1990-1999">1990-1999</option>
                <option value="1980-1989">1980-1989</option>
              </select>
              <div class="helper-text">Boş bırakılırsa tarihten otomatik çekilir</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h2 class="section-title">Medya & Durum</h2>
          <div class="form-grid">
            <div class="form-group full-width">
              <label>Belge/Görsel URL <span class="required">*</span></label>
              <input type="url" id="belge_url" required placeholder="https://i.imgur.com/xxxxx.jpg">
              <div class="helper-text">Imgur, Cloudinary gibi güvenilir platformlar kullanın</div>
            </div>

            <div class="form-group full-width">
              <label>Resmi Kaynak Linki</label>
              <input type="url" id="kaynak_link" placeholder="https://resmi-belge-sitesi.com/dokuman.pdf">
              <div class="helper-text">Resmi belge, devlet arşivi, mahkeme kararı vb. link</div>
            </div>

            <div class="form-group full-width">
              <label>Gazete Haberleri</label>
              <textarea id="gazete_haberi" placeholder='New York Times: "Başlık" | BBC: "Başlık" | Reuters: "Başlık"'></textarea>
              <div class="helper-text">Format: Gazete Adı: "Haber Başlığı" | Diğer Gazete: "Başlık"</div>
            </div>

            <div class="form-group full-width">
              <label>YALAN Logosu URL</label>
              <input type="url" id="yalan_logo_url" placeholder="https://i.imgur.com/YALAN_LOGO.png">
              <div class="helper-text">Sadece "Resmi Yalan" olan dosyalara ekleyin</div>
            </div>

            <div class="form-group full-width">
              <div class="checkbox-group">
                <input type="checkbox" id="yalan_mi">
                <label for="yalan_mi" class="checkbox-label">Bu Dosya Resmi Bir Yalan İçeriyor</label>
              </div>
            </div>
          </div>
        </div>

        <div class="button-group">
          <button type="submit">Dosyayı Veritabanına Ekle</button>
          <button type="reset" class="secondary">Formu Temizle</button>
        </div>

        <div id="addResponse" class="response-box"></div>
      </form>
    </div>

    <!-- SQL SORGULARI -->
    <div id="sqlTab" class="tab-content">
      <div class="form-section">
        <h2 class="section-title">SQL Sorgu Editörü</h2>
        
        <div class="form-group">
          <label>Hazır Sorgular</label>
          <select id="quickQueries" onchange="loadQuickQuery()">
            <option value="">Hazır Sorgu Seç</option>
            <option value="select">Tüm Dosyaları Listele</option>
            <option value="count">Toplam Dosya Sayısı</option>
            <option value="yalan">Sadece Yalanları Getir</option>
            <option value="recent">Son 10 Dosya</option>
            <option value="country">Ülkeye Göre Grupla</option>
            <option value="delete">Dosya Sil (ID ile)</option>
            <option value="update">Dosya Güncelle (ID ile)</option>
          </select>
        </div>

        <div class="form-group">
          <label>SQL Sorgusu</label>
          <textarea id="sqlQuery" class="sql-editor" placeholder="SELECT * FROM gizli_dosyalar WHERE..."></textarea>
        </div>

        <div class="button-group">
          <button onclick="executeSQLQuery()">Sorguyu Çalıştır</button>
          <button class="secondary" onclick="clearSQLQuery()">Temizle</button>
        </div>

        <div id="sqlResponse" class="response-box"></div>
      </div>
    </div>

    <!-- İSTATİSTİKLER -->
    <div id="statsTab" class="tab-content">
      <h2 class="section-title">Arşiv İstatistikleri</h2>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" id="totalCount">0</div>
          <div class="stat-label">Toplam Dosya</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="yalanCount">0</div>
          <div class="stat-label">Resmi Yalan</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="dogruCount">0</div>
          <div class="stat-label">Doğrulanmış</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="ulkeCount">0</div>
          <div class="stat-label">Ülke/Bölge</div>
        </div>
      </div>

      <button onclick="loadStats()">İstatistikleri Yenile</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const _0x1a2b = atob('aHR0cHM6Ly9rbHdmY2htdmJydm5ydml3ZnN0bi5zdXBhYmFzZS5jbw==');
    const _0x3c4d = atob('ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW10c2QyWmphRzEyWW5KMmJuSjJhWGRtYzNSdUlpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTmpVNU9UTXhNVGtzSW1WNGNDSTZNakE0TVRVMU9URXhPWDAuVElIN2h6cEctZUNac2NobWhtVlpaU2xLOUxHRkZNNGhaUllnS1VVUUS3cw==');
    const _$x = String.fromCharCode(115,117,112,97,98,97,115,101);
    const supabase = window[_$x].createClient(_0x1a2b, _0x3c4d);

    function switchTab(tab) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(tab + 'Tab').classList.add('active');
      
      if (tab === 'stats') loadStats();
    }

    document.getElementById('addForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const responseBox = document.getElementById('addResponse');
      responseBox.className = 'response-box';
      responseBox.textContent = 'Dosya ekleniyor...';
      
      const tarih = document.getElementById('tarih').value;
      let yil = document.getElementById('yil').value;
      
      if (!yil && tarih) {
        yil = new Date(tarih).getFullYear().toString();
      }
      
      const data = {
        baslik: document.getElementById('baslik').value,
        ozet: document.getElementById('ozet').value,
        detay: document.getElementById('detay').value,
        ulke: document.getElementById('ulke').value,
        platform: document.getElementById('platform').value || null,
        tur: document.getElementById('tur').value,
        ortam: document.getElementById('ortam').value || null,
        tarih: tarih,
        yil: yil,
        belge_url: document.getElementById('belge_url').value,
        kaynak_link: document.getElementById('kaynak_link').value || null,
        gazete_haberi: document.getElementById('gazete_haberi').value || null,
        yalan_logo_url: document.getElementById('yalan_logo_url').value || null,
        yalan_mi: document.getElementById('yalan_mi').checked
      };
      
      try {
        const { error } = await supabase
          .from('gizli_dosyalar')
          .insert([data]);
        
        if (error) throw error;
        
        responseBox.className = 'response-box success';
        responseBox.textContent = '✓ Dosya başarıyla eklendi! ID: ' + (Math.floor(Math.random() * 1000));
        
        document.getElementById('addForm').reset();
        
        setTimeout(() => {
          responseBox.className = 'response-box';
        }, 5000);
      } catch (err) {
        responseBox.className = 'response-box error';
        responseBox.textContent = '✗ Hata: ' + err.message;
      }
    });

    function loadQuickQuery() {
      const select = document.getElementById('quickQueries');
      const editor = document.getElementById('sqlQuery');
      
      const queries = {
        select: 'SELECT * FROM gizli_dosyalar ORDER BY id DESC;',
        count: 'SELECT COUNT(*) FROM gizli_dosyalar;',
        yalan: 'SELECT * FROM gizli_dosyalar WHERE yalan_mi = true;',
        recent: 'SELECT * FROM gizli_dosyalar ORDER BY tarih DESC LIMIT 10;',
        country: 'SELECT ulke, COUNT(*) as toplam FROM gizli_dosyalar GROUP BY ulke ORDER BY toplam DESC;',
        delete: 'DELETE FROM gizli_dosyalar WHERE id = 1;  -- ID değiştir',
        update: 'UPDATE gizli_dosyalar SET baslik = \'Yeni Başlık\' WHERE id = 1;  -- Düzenle'
      };
      
      if (queries[select.value]) {
        editor.value = queries[select.value];
      }
    }

    async function executeSQLQuery() {
      const query = document.getElementById('sqlQuery').value.trim();
      const responseBox = document.getElementById('sqlResponse');
      
      if (!query) {
        responseBox.className = 'response-box error';
        responseBox.textContent = '✗ Lütfen bir SQL sorgusu girin!';
        return;
      }
      
      responseBox.className = 'response-box';
      responseBox.textContent = 'Sorgu çalıştırılıyor...';
      
      try {
        let result;
        
        if (query.toLowerCase().startsWith('select')) {
          result = await supabase.rpc('execute_sql', { query_text: query });
        } else {
          const match = query.match(/FROM\s+(\w+)/i);
          const table = match ? match[1] : 'gizli_dosyalar';
          
          if (query.toLowerCase().includes('insert')) {
            result = await supabase.from(table).insert([{}]);
          } else if (query.toLowerCase().includes('update')) {
            result = await supabase.from(table).update({});
          } else if (query.toLowerCase().includes('delete')) {
            result = await supabase.from(table).delete();
          }
        }
        
        responseBox.className = 'response-box success';
        responseBox.textContent = '✓ Sorgu başarıyla çalıştırıldı!\n\n' + 
          JSON.stringify(result, null, 2);
      } catch (err) {
        responseBox.className = 'response-box error';
        responseBox.textContent = '✗ SQL Hatası: ' + err.message;
      }
    }

    function clearSQLQuery() {
      document.getElementById('sqlQuery').value = '';
      document.getElementById('quickQueries').value = '';
    }

    async function loadStats() {
      try {
        const { data: all } = await supabase
          .from('gizli_dosyalar')
          .select('*');
        
        const { data: yalan } = await supabase
          .from('gizli_dosyalar')
          .select('*')
          .eq('yalan_mi', true);
        
        const ulkeler = new Set(all.map(d => d.ulke));
        
        document.getElementById('totalCount').textContent = all.length;
        document.getElementById('yalanCount').textContent = yalan.length;
        document.getElementById('dogruCount').textContent = all.length - yalan.length;
        document.getElementById('ulkeCount').textContent = ulkeler.size;
      } catch (err) {
        console.error('İstatistik yükleme hatası:', err);
      }
    }
  </script>
</body>
</html>
